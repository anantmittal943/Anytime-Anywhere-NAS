<Window xmlns="https://github.com/avaloniaui"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:vm="using:Anytime_Anywhere_NAS.ViewModels"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
		x:Class="Anytime_Anywhere_NAS.Views.MainWindow"
		x:DataType="vm:MainWindowViewModel"
		Icon="/Assets/avalonia-logo.ico"
		Title="Anytime_Anywhere_NAS">

	<Design.DataContext>
		<!-- This only sets the DataContext for the previewer in an IDE,
		to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
		<vm:MainWindowViewModel/>
	</Design.DataContext>

	<StackPanel Spacing="10" VerticalAlignment="Center" HorizontalAlignment="Center" MinWidth="500" Margin="20">

		<TextBlock Text="{Binding Header}" FontSize="16" HorizontalAlignment="Center" FontWeight="Bold"/>

		<Separator Height="10" />

		<TextBlock Text="NAS Status:" FontWeight="Bold" />
		<TextBlock Text="{Binding NasStatus}" FontSize="16" HorizontalAlignment="Center" Margin="0,5,0,10" TextWrapping="Wrap"/>

		<!-- Docker Installation Section - Windows -->
		<Border BorderBrush="#FF6B6B" BorderThickness="2" Padding="15" CornerRadius="5" 
				IsVisible="{Binding !IsDockerInstalled}">
			<StackPanel Spacing="10">
				<TextBlock Text="?? Docker Required" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
				
				<TextBlock Text="Docker is required to run this NAS application." 
						   TextWrapping="Wrap" HorizontalAlignment="Center"/>
				
				<!-- Windows Install Button -->
				<Button Content="Install Docker Desktop (Windows)" 
						Command="{Binding InstallDockerCommand}" 
						HorizontalAlignment="Stretch" 
						Background="#FF6B6B"
						Foreground="White"
						Padding="10"
						IsVisible="{Binding IsWindows}" />
				
				<!-- Linux Instructions -->
				<StackPanel Spacing="8" IsVisible="{Binding IsLinux}">
					<TextBlock Text="Please install Docker using your system's package manager:" 
							   FontWeight="Bold" TextWrapping="Wrap"/>
					
					<TextBlock TextWrapping="Wrap" Padding="10" Background="#F5F5F5">
						<Run Text="Ubuntu/Debian:"/>
						<LineBreak/>
						<Run Text="sudo apt-get update" FontFamily="Consolas"/>
						<LineBreak/>
						<Run Text="sudo apt-get install docker.io docker-compose" FontFamily="Consolas"/>
					</TextBlock>
					
					<TextBlock TextWrapping="Wrap" Padding="10" Background="#F5F5F5">
						<Run Text="Fedora/RHEL/CentOS:"/>
						<LineBreak/>
						<Run Text="sudo dnf install docker docker-compose" FontFamily="Consolas"/>
					</TextBlock>
					
					<TextBlock TextWrapping="Wrap" Padding="10" Background="#F5F5F5">
						<Run Text="Arch/Manjaro:"/>
						<LineBreak/>
						<Run Text="sudo pacman -S docker docker-compose" FontFamily="Consolas"/>
					</TextBlock>
					
					<TextBlock TextWrapping="Wrap" Padding="10" Background="#F5F5F5">
						<Run Text="After installation, start Docker:"/>
						<LineBreak/>
						<Run Text="sudo systemctl start docker" FontFamily="Consolas"/>
						<LineBreak/>
						<Run Text="sudo systemctl enable docker" FontFamily="Consolas"/>
					</TextBlock>
					
					<Border BorderBrush="#FFA500" BorderThickness="2" Padding="10" Background="#FFF8DC">
						<StackPanel Spacing="5">
							<TextBlock Text="?? IMPORTANT: Add Your User to Docker Group" 
									   FontWeight="Bold" TextWrapping="Wrap"/>
							<TextBlock TextWrapping="Wrap" FontFamily="Consolas" Background="#F0F0F0" Padding="5">
								<Run Text="sudo usermod -aG docker $USER"/>
							</TextBlock>
							<TextBlock Text="After running this command, you MUST log out and log back in (or reboot) for the changes to take effect!" 
									   FontWeight="Bold" Foreground="#D32F2F" TextWrapping="Wrap"/>
						</StackPanel>
					</Border>
					
					<TextBlock Text="Then restart this application." 
							   FontStyle="Italic" HorizontalAlignment="Center"/>
				</StackPanel>
			</StackPanel>
		</Border>

		<Separator Height="10" />

		<TextBlock Text="Shared Folder:" FontWeight="Bold" />
		<TextBlock Text="{Binding SelectedFolderPath}" Padding="5" />

		<Button Name="SelectFolderButton" 
				Content="1. Select Folder to Share" 
				HorizontalAlignment="Stretch" 
				Click="OnSelectFolderClick" 
				Padding="10"/>

		<Button Content="2. Start NAS" 
				Command="{Binding StartNasCommand}" 
				HorizontalAlignment="Stretch" 
				Background="#4CAF50"
				Foreground="White"
				Padding="10"/>

		<Button Content="3. Stop NAS" 
				Command="{Binding StopNasCommand}" 
				HorizontalAlignment="Stretch" 
				Background="#F44336"
				Foreground="White"
				Padding="10"/>

	</StackPanel>


</Window>
